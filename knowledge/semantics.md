# Проверки

## Первый модуль в списке = procedure

## Единица трансляции = имя файла модуля

## Проверка количество уровней в импорте

Должен быть 1 уровень кроме Ada.Text_IO

## Проверка доступности имен для типов и подпрог.

## Проверка доступности имен в объявлениях и в коде

## Проверка конфликта имен

* При объявление в одной области видимости - конфликт
* проверять все кроме функций
* в процедурах и ф-циях проверять параметры и декларации (между собой и внутри)

## Проверка на импорт самого себя

## Проверка на use не импортированных модулей

## Проверка на импорт существующего модуля

## Проверка типов

## Проверка перегрузки

Проверка что об. в одном скопе. подпрог. действительно перег.

## Проверка на наличие return в ф-ции

## Проверка указания своего типа в рекорде

запрет на объявления переменных с таким типом

# Преобразования AST

## Замена типов-затычек в вардеклах

## Замена типов-затычек в алиасах

если там затычка

## Замена типов-затычек в типах-массивах

## Замена типов-затычек в функции на указатель на реальный тип

\+ Замена надклассовой ссылки на укзатель на временную объект, врем. объект. добавлятеся в тот же скоуп

* Замена типа для переменных в: пакете, подпрог, в параметрах подпрог, в рекорде
* Замена типа в типе массива

## Изменение временных объектов надклассовых ссылок

Добавление в них указателя на класс

## Замена exrp на обращение к элементу массива

## Замена expr массива и assign на присваивание

## Замена expr на вызов функции

## Замена expr на получение переменной

## Замена expr получения аттрибута на вызов стандартной либы

## Создания фул ооп класса из pack+type

Вставка класса в скоуп рекорда и подпрог.

Замена родителя рекорда и подпрог. на класс

## Замена типов-затычек при наследование рекода

* проверка на переопределение значений
* проверка на tagged базу (обязательно при наследовании) и перевод самого рекорда в tagged

## Создание глобал спейса

внесение в него импортов, обработка юзов, для каждого модуля

## Добавить указатель в for на нужный вардекл

# Последовательность

1. Первый модуль в списке = procedure
2. Единица трансляции = имя файла модуля
3. Проверка количество уровней в импорте
4. Проверка на импорт самого себя
5. Проверка на импорт существующего модуля
6. Проверка на use не импортированных модулей
7. Создание глабал спейса и проверка импортам друг-друга (совместно с 6)
8. Проверка конфликта имен
9. Проверка доступности имен для типов и подпрог.
10. Замена типов-затычек в функции на указатель на реальный тип (совместно с 9)
11. Проверка указания своего типа в рекорде (совместно с 9 и 10)
12. Замена типов-затычек при наследование рекода (совместно с 9, 10 и 11)
13. Проверка окончаний подпрограм, типов, пакетов
14. Проверка перегрузки
15. Создания фул ооп класса из pack+type
16. Добавление классов в наследовании (c 15)
17. Добавление ссылки на класс в надклас. ссылки.
18. Проверка доступности имен в объявлениях и в коде (c 9 и с 23)
19. Замена типов-затычек в типах-массивах (c 9)
20. Замена типов-затычек в алиасах (c 9)
21. Замена типов-затычек в вардеклах (c 9)
22. Замена exrp на обращение к элементу массива
23. Замена expr на вызов функции
24. Замена expr массива и assign на присваивание
25. Замена expr на получение переменной
26. Замена expr получения аттрибута на вызов стандартной либы
27. Добавить указатель в for на нужный вардекл
28. Проверка типов
29. Проверка на наличие return в ф-ции
